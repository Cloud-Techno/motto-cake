$(document).ready(function(){$(".fa-bars").click(function(){$(this).toggleClass("fa-times"),$(".navbar").toggleClass("nav-toggle")}),$(".navbar a").on("click",function(){$(".navbar").removeClass("nav-toggle"),$(".fa-bars").removeClass("fa-times")});let e=!1;$(window).on("load scroll",function(){e||(window.requestAnimationFrame(function(){35<$(window).scrollTop()?$(".header").css({background:"#e5bfbf","box-shadow":"0 .2rem .5rem rgba(0,0,0,.4)"}):$(".header").css({background:"none","box-shadow":"none"}),e=!1}),e=!0)});var t=document.querySelectorAll(".counter");t.forEach(n=>{let a=()=>{var e=+n.getAttribute("data-target"),t=+n.innerText;t<e?(n.innerText=Math.ceil(t+e/120),setTimeout(a,16)):n.innerText=e};a()}),$(".clients-carousel").owlCarousel({autoplay:!0,autoplayTimeout:1500,dots:!0,loop:!0,responsive:{0:{items:2},768:{items:4},900:{items:6}}}),$(".testimonials-carousel").owlCarousel({autoplay:!0,dots:!0,loop:!0,responsive:{0:{items:1},576:{items:2},768:{items:3},992:{items:4}}}),$(".gallery-grid").owlCarousel({autoplay:!0,autoplayTimeout:2e3,autoplayHoverPause:!1,loop:!0,margin:20,dots:!0,nav:!1,smartSpeed:1e3,responsive:{0:{items:1},768:{items:4}}}),$(document).on("change",'input[name="size"], input[name="extra"]',function(){var e,t,n,a,o;t=$("#basePrice"),n=$("#extrasPrice"),a=$("#grandTotal"),(o=$('input[name="size"]:checked').val())?"ask"===o?(t.text("Preis anfragen"),n.text("—"),a.text("Bitte anfragen")):(o=parseFloat(o)||0,e=0,$('input[name="extra"]:checked').each(function(){e+=parseFloat($(this).val())||0}),t.text("CHF "+o.toFixed(2)),n.text("CHF "+e.toFixed(2)),a.text("CHF "+(o+e).toFixed(2))):(t.text("—"),n.text("CHF 0"),a.text("—"))}),$("#addToContact").on("click",function(e){e.preventDefault();var e=$('input[name="size"]:checked').data("label")||"",t=[],n=($('input[name="extra"]:checked').each(function(){t.push($(this).data("name")||$(this).parent().text().trim())}),$("#grandTotal").text()||""),a="",a="20+ Personen"===e||"ask"===$('input[name="size"]:checked').val()?"Anfrage für 20+ Personen. Bitte kalkulieren.":"Bestellung\nPersonenzahl: "+e+"\nExtras: "+(t.join(", ")||"Keine")+"\nPreis: "+n,e=$("#kf-message");e.length&&e.val(a),$("html, body").animate({scrollTop:$("#kf-form-section").offset().top-20},600)}),$(window).scroll(function(){100<$(this).scrollTop()?$(".back-to-top").fadeIn("slow"):$(".back-to-top").fadeOut("slow")}),$(".back-to-top").click(function(){return $("html, body").animate({scrollTop:0},1500,"easeInOutExpo"),!1}),$(document).on("click",function(e){var t=$(".navbar"),n=$(".fa-bars");!t.hasClass("nav-toggle")||0<$(e.target).closest(".navbar").length||0<$(e.target).closest(".fa-bars").length||(t.removeClass("nav-toggle"),n.removeClass("fa-times"))}),$(".accordion-header").click(function(){var e=$(this).next(".accordion-body");e.is(":visible")?(e.slideUp(500),$(this).children("span").text("+")):($(".accordion .accordion-body").slideUp(500),$(".accordion .accordion-header span").text("+"),e.slideDown(500),$(this).children("span").text("-"))}),"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&"function"==typeof jQuery.fn.slideDown||document.querySelectorAll(".accordion-header").forEach(function(e){e.addEventListener("click",function(){var e,t=this.nextElementSibling;t&&"none"!==window.getComputedStyle(t).display?(t.style.display="none",(e=this.querySelector("span"))&&(e.textContent="+")):(document.querySelectorAll(".accordion .accordion-body").forEach(function(e){e.style.display="none"}),document.querySelectorAll(".accordion .accordion-header span").forEach(function(e){e.textContent="+"}),t&&(t.style.display="block"),(e=this.querySelector("span"))&&(e.textContent="-"))})});let o=document.getElementById("cakeForm");o&&o.addEventListener("submit",function(e){e.preventDefault();let t=o.querySelector('[type="submit"]'),n=t.innerText;t.disabled=!0,t.innerText="Senden...";e=(o.querySelector("#kf-name")?.value||"").trim(),e=e?"Neue Bestellung — "+e:"Neue Bestellung";let a=o.querySelector('input[name="_subject"]');a||((a=document.createElement("input")).type="hidden",a.name="_subject",o.appendChild(a)),a.value=e;e=new FormData(o);fetch(o.action,{method:"POST",body:e,headers:{Accept:"application/json"}}).then(e=>{e.ok?window.location.href="thanks.html":alert("Fehler beim Senden des Formulars.")}).catch(()=>{alert("Formular konnte nicht gesendet werden.")}).finally(()=>{t.disabled=!1,t.innerText=n})})});