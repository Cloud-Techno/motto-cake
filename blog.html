<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mottocake Blog</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"
    />

    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/blog.css" />
    <link rel="icon" href="./images/image.png" />
  </head>
  <body>
    <header class="header">
      <a href="index.html" class="logo">
        <h1>Motto Cake</h1>
      </a>
      <div class="social-links">
        <a
          href="https://www.instagram.com/motto_cake?igsh=MXNmc2JlYTU3d2djYQ%3D%3D&utm_source=qr"
          target="_blank"
        >
          <i class="ion-logo-instagram"></i>
        </a>
        <a href="https://wa.me/41782306029" target="_blank">
          <i class="ion-logo-whatsapp"></i>
        </a>
      </div>
      <div class="fas fa-bars"></div>
      <nav class="navbar">
        <ul>
          <li><a href="index.html#home">Home</a></li>
          <li><a href="index.html#about">Ãœber Uns</a></li>
          <li><a href="index.html#service">Leistungen</a></li>
          <li><a href="index.html#kf-form-section">Kontakt</a></li>
        </ul>
      </nav>
    </header>

    <section class="blog-section py-5">
      <div class="container">
        <h2 class="text-center mb-5 blog-title">ğŸ° Motto Cake Blog</h2>
        <div class="row" id="posts"></div>
        <div class="text-center" id="loading-spinner">
          <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Laden...</span>
          </div>
        </div>
        <div class="text-center" id="error-message" style="display: none">
          <p class="text-danger">BeitrÃ¤ge konnten nicht geladen werden.</p>
        </div>
      </div>
    </section>

    <div class="footer">
      <div class="footer-top">
        <div class="container">
          <div class="row">
            <div class="col-lg-3 col-md-6 footer-links">
              <h4>Ãœber Uns</h4>
              <ul>
                <li>
                  <i class="ion-ios-arrow-forward"></i>
                  <a href="index.html#home">Home</a>
                </li>
                <li>
                  <i class="ion-ios-arrow-forward"></i>
                  <a href="impressum.html">Impressum</a>
                </li>
                <li>
                  <i class="ion-ios-arrow-forward"></i>
                  <a href="datenschutz.html">Datenschutz</a>
                </li>
              </ul>
            </div>
            <div
              class="col-lg-3 col-md-6 footer-contact"
              style="font-size: 1.5rem"
            >
              <h4>Kontakt</h4>
              <p>
                Stadtbachstrasse 15<br />5400 Baden<br />Switzerland
                <br /><strong>Phone:</strong> +41 78 230 6029<br /><strong
                  >Email:</strong
                >
                info@mottocake.ch<br />
              </p>
            </div>
            <div class="col-lg-3 col-md-6 footer-newsletter">
              <h4>Ãœber mich</h4>
              <p>
                Ich bin eine Hauskonditorin aus Baden und spezialisiere mich auf
                Boutique-Torten, individuelle Design-Torten und frische
                Geburtstagstorten.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row align-items-center">
          <div
            class="col-md-6 copyright"
            style="color: #fff; font-size: 1.3rem"
          >
            Copyright Â© 2025 MottoCake by Derya Nagehan Ates. All Rights
            Reserved.
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>

    <script>
      // Post yÃ¼kleme JavaScript'i
      async function loadPosts() {
        const container = document.getElementById("posts");
        const loadingSpinner = document.getElementById("loading-spinner");
        const errorMessage = document.getElementById("error-message");

        loadingSpinner.style.display = "block"; // YÃ¼kleniyor spinner'Ä±nÄ± gÃ¶ster

        try {
          // API Ã§aÄŸrÄ±sÄ±
          let res = await fetch("/api/getPosts.php");

          if (!res.ok) {
            throw new Error(`HTTP error! status: ${res.status}`);
          }

          let posts = await res.json();

          loadingSpinner.style.display = "none"; // Spinner'Ä± gizle
          container.innerHTML = ""; // Ä°Ã§eriÄŸi temizle

          if (posts.length === 0) {
            container.innerHTML =
              '<div class="col-12"><p class="text-center text-muted">HenÃ¼z yayÄ±nlanmÄ±ÅŸ bir blog yazÄ±sÄ± bulunmamaktadÄ±r.</p></div>';
            return;
          }

          // PostlarÄ± Bootstrap Card yapÄ±sÄ±nda dÃ¶ngÃ¼ye al
          posts.forEach((p) => {
            // Ã–rnek bir resim URL'si ekledim. GerÃ§ek bir blogda, post verisinde bu URL olmalÄ±.
            const imageUrl = p.image || "./images/default-blog-image.jpg";

            // Ä°Ã§eriÄŸin sadece bir kÄ±smÄ±nÄ± gÃ¶ster (Ã–zet)
            const summary =
              p.content.substring(0, 150) +
              (p.content.length > 150 ? "..." : "");

            container.innerHTML += `
              <div class="col-md-6 col-lg-4 mb-4">
                <div class="card blog-card h-100 shadow-sm">
                  <div class="card-img-top blog-image" style="background-image: url('${imageUrl}');"></div> 
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title post-title">${p.title}</h5>
                    <p class="card-subtitle mb-2 text-muted small">Yazar: Derya | Tarih: ${
                      p.date || "Bilinmiyor"
                    }</p>
                    <p class="card-text post-summary">${summary}</p>
                    <a href="#" class="mt-auto btn btn-custom-readmore">Weiterlesen <i class="fas fa-arrow-right"></i></a> 
                  </div>
                </div>
              </div>
            `;
          });
        } catch (error) {
          console.error("Post yÃ¼kleme hatasÄ±:", error);
          loadingSpinner.style.display = "none"; // Spinner'Ä± gizle
          errorMessage.style.display = "block"; // Hata mesajÄ±nÄ± gÃ¶ster
        }
      }

      // VarsayÄ±lan resim iÃ§in bir yer tutucu oluÅŸturun
      // GerÃ§ek resim veriniz yoksa, her postun iÃ§eriÄŸine uygun bir resim eklemeyi dÃ¼ÅŸÃ¼nÃ¼n.

      loadPosts();
    </script>
  </body>
</html>
